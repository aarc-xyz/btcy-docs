---
title: "Oracle Pricing"
description: "NAV pricing via Chainlink oracles."
---

## Overview

iBTCY is priced based on **Net Asset Value (NAV)**, not market trading. The Pricer contract integrates with Chainlink oracles to provide on-chain NAV data.

---

## Price Feeds

| Feed | Purpose |
|------|---------|
| **NAV Feed** | Current NAV per iBTCY token |
| **BTC/USD Feed** | Reference price for conversions |

---

## How It Works

1. **Off-chain calculation** — NAV calculated based on fund assets
2. **Oracle update** — Price pushed to Chainlink feed
3. **On-chain read** — Pricer contract reads and validates
4. **Mint/redeem** — Operations use validated price

```
Fund Assets → NAV Calculation → Chainlink Oracle → Pricer Contract → Hub Operations
```

---

## Validation

The Pricer contract validates all price data:

### Staleness Check

```solidity
require(
    block.timestamp - updatedAt <= maxStaleness,
    "Price data stale"
);
```

Rejects price data older than the configured threshold.

### Price Bounds

```solidity
require(
    price >= minPrice && price <= maxPrice,
    "Price out of bounds"
);
```

Flags extreme values that may indicate oracle issues.

### Sequence Check

```solidity
require(
    roundId > lastRoundId,
    "Stale round"
);
```

Ensures price updates are sequential.

---

## Fallback Behavior

If oracle data fails validation:

1. **Pause operations** — New mints/redeems paused
2. **Existing positions** — Unaffected
3. **Manual intervention** — Operators investigate and resolve

---

## Update Frequency

NAV is typically updated:
- **Daily** — End of business day
- **Ad-hoc** — Significant market movements

---

## Integration

For developers integrating with BTCY pricing:

```solidity
// Get current NAV price
(uint256 price, uint256 updatedAt) = pricer.getPrice();

// Calculate iBTCY amount for BTC deposit
uint256 ibtcyAmount = btcAmount * 1e18 / price;
```

---

<Card title="Pricer Contract" icon="file-code" href="/developers/contracts/pricer">
  See Pricer contract reference
</Card>
