---
title: "Architecture Overview"
sidebarTitle: "Overview"
description: "Technical architecture of the BTCY system."
---

## System Components

BTCY consists of four main smart contracts:

<img
  className="hidden dark:block rounded-lg my-6"
  src="/images/contracts-dark.svg"
  alt="Contract Architecture"
/>
<img
  className="block dark:hidden rounded-lg my-6"
  src="/images/contracts-light.svg"
  alt="Contract Architecture"
/>

---

## Contracts

| Contract | Purpose |
|----------|---------|
| **iBTCY** | NAV-based security token with transfer restrictions |
| **iBTCYHub** | Handles mint and redeem requests |
| **BTCY** | ERC-4626 vault wrapping iBTCY |
| **Pricer** | Oracle integration for NAV pricing |

---

## iBTCY

The institutional token. Key features:

- **ERC-20** with transfer hooks
- **Allowlist** — only approved addresses can hold/transfer
- **Blocklist** — sanctioned addresses are blocked
- **Pausable** — emergency stop capability

```solidity
// Transfer restriction
function _update(address from, address to, uint256 amount) internal override {
    require(allowlist.isAllowed(to), "Recipient not allowed");
    require(!blocklist.isBlocked(from), "Sender blocked");
    super._update(from, to, amount);
}
```

---

## iBTCYHub

Manages the mint/redeem lifecycle:

1. **Request** — User submits mint/redeem request
2. **Validate** — Hub validates eligibility and amounts
3. **Process** — Operator processes after off-chain settlement
4. **Complete** — Tokens minted or redeemed

Key features:
- Asynchronous two-phase operations
- Request expiry for stale requests
- Minimum amounts and daily limits

---

## BTCY Vault

ERC-4626 tokenized vault:

- **1:1 wrapping** — deposit iBTCY, receive BTCY
- **Instant** — wrap/unwrap in single transaction
- **Allowlist on unwrap** — only allowlisted addresses can receive iBTCY

```solidity
function deposit(uint256 assets, address receiver) public returns (uint256 shares) {
    shares = assets; // 1:1 exchange
    iBTCY.transferFrom(msg.sender, address(this), assets);
    _mint(receiver, shares);
}
```

---

## Pricer

Oracle integration for NAV pricing:

- **Chainlink feeds** — NAV and BTC/USD prices
- **Staleness checks** — reject stale data
- **Price bounds** — flag extreme values
- **Fallback** — graceful degradation

---

## Upgrade Pattern

All contracts use **UUPS** (Universal Upgradeable Proxy Standard):

- Upgrades require **UPGRADER_ROLE**
- All upgrades are **timelocked**
- Implementation changes are logged on-chain

---

<CardGroup cols={2}>
  <Card title="Roles & Permissions" icon="key" href="/developers/architecture/roles-permissions">
    Access control details
  </Card>
  <Card title="Oracle Pricing" icon="chart-line" href="/developers/architecture/oracle-pricing">
    NAV pricing mechanism
  </Card>
</CardGroup>
