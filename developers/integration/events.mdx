---
title: "Contract Events"
sidebarTitle: "Events"
description: "Events emitted by BTCY contracts for indexing."
---

## Overview

All BTCY contracts emit events for key state changes. These can be indexed for tracking, analytics, and integration.

---

## iBTCY Events

### Transfers

```solidity
event Transfer(
    address indexed from,
    address indexed to,
    uint256 value
);

event Approval(
    address indexed owner,
    address indexed spender,
    uint256 value
);
```

### Compliance

```solidity
event AllowlistUpdated(
    address indexed account,
    bool allowed
);

event BlocklistUpdated(
    address indexed account,
    bool blocked
);
```

### Operations

```solidity
event Paused(address account);
event Unpaused(address account);
```

---

## iBTCYHub Events

### Mint Lifecycle

```solidity
event MintRequested(
    uint256 indexed requestId,
    address indexed recipient,
    uint256 btcAmount,
    bytes32 btcTxHash
);

event MintProcessed(
    uint256 indexed requestId,
    uint256 ibtcyAmount,
    uint256 navPrice
);

event MintCancelled(
    uint256 indexed requestId,
    string reason
);
```

### Redeem Lifecycle

```solidity
event RedeemRequested(
    uint256 indexed requestId,
    address indexed sender,
    uint256 ibtcyAmount,
    string btcAddress
);

event RedeemProcessed(
    uint256 indexed requestId,
    uint256 btcAmount
);

event RedeemCancelled(
    uint256 indexed requestId,
    string reason
);
```

---

## BTCY Vault Events

### ERC-4626 Events

```solidity
event Deposit(
    address indexed sender,
    address indexed owner,
    uint256 assets,
    uint256 shares
);

event Withdraw(
    address indexed sender,
    address indexed receiver,
    address indexed owner,
    uint256 assets,
    uint256 shares
);
```

### ERC-20 Events

```solidity
event Transfer(
    address indexed from,
    address indexed to,
    uint256 value
);

event Approval(
    address indexed owner,
    address indexed spender,
    uint256 value
);
```

---

## Pricer Events

```solidity
event PriceUpdated(
    uint256 price,
    uint256 timestamp,
    uint80 roundId
);

event FeedUpdated(
    address indexed oldFeed,
    address indexed newFeed,
    string feedType
);

event StalenessUpdated(
    uint256 oldStaleness,
    uint256 newStaleness
);
```

---

## Indexing Example

Using ethers.js:

```javascript
const ibtcy = new ethers.Contract(address, abi, provider);

// Listen for transfers
ibtcy.on("Transfer", (from, to, value) => {
  console.log(`Transfer: ${from} -> ${to}: ${value}`);
});

// Query historical events
const filter = ibtcy.filters.Transfer(null, recipientAddress);
const events = await ibtcy.queryFilter(filter, fromBlock, toBlock);
```

---

## Subgraph

A subgraph for indexing BTCY events will be available after launch.

---

<Card title="GitHub" icon="github" href="https://github.com/aarc-xyz">
  View source code
</Card>
